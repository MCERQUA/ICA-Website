{# Licensing & Credentials Component #}
{# Usage: {% include "sections/licensing-credentials.njk" %} #}
{# Variables: sectionTitle, showVerifyLinks, theme (dark/light) #}

{% set sectionTitle = sectionTitle or "Licensed, Bonded & Insured" %}
{% set showVerifyLinks = showVerifyLinks if showVerifyLinks is defined else true %}
{% set theme = theme or "dark" %}

<section class="licensing-credentials {{ 'licensing-credentials--' + theme }}">
  <div class="container">
    <div class="credentials-header">
      <div class="credentials-icon">
        <img src="/images/Spray_Foam_Insurance_logo-200w.webp"
             srcset="/images/Spray_Foam_Insurance_logo-100w.webp 100w,
                     /images/Spray_Foam_Insurance_logo-150w.webp 150w,
                     /images/Spray_Foam_Insurance_logo-200w.webp 200w"
             sizes="(max-width: 768px) 90vw, 400px"
             alt="Spray Foam Insurance" 
             class="credentials-logo"
             width="400"
             height="178"
             loading="lazy">
      </div>
      <h2 class="credentials-title">{{ sectionTitle }}</h2>
      <p class="credentials-subtitle">
        At Insulation Contractors of Arizona, we maintain the highest standards of professional service backed by comprehensive insurance and proper licensing. When you choose us, you're choosing peace of mind and protection throughout your project.
      </p>
    </div>

    <div class="credentials-grid">
      <div class="credential-card">
        <div class="credential-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 11V6a3 3 0 116 0v5M9 11a3 3 0 106 0M9 11v7a2 2 0 002 2h2a2 2 0 002-2v-7"/>
            <circle cx="12" cy="4" r="1"/>
          </svg>
        </div>
        <h3 class="credential-title">Licensed</h3>
        <p class="credential-number">ROC #335896</p>
        <p class="credential-description">Fully licensed with the Arizona Registrar of Contractors</p>
      </div>

      <div class="credential-card">
        <div class="credential-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </div>
        <h3 class="credential-title">Bonded</h3>
        <p class="credential-description">Protected against contractual defaults with proper bonding</p>
      </div>

      <div class="credential-card">
        <div class="credential-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
        </div>
        <h3 class="credential-title">Insured</h3>
        <p class="credential-description">Comprehensive liability and workers' compensation coverage</p>
      </div>
    </div>

    {% if showVerifyLinks %}
    <div class="verify-credentials">
      <h3 class="verify-title">Verify Our Credentials</h3>
      <p class="verify-subtitle">We're proud of our reputation and encourage you to verify our credentials directly with the issuing authorities:</p>
      
      <div class="verify-links">
        <a href="https://azroc.my.site.com/AZRoc/s/contractor-search" target="_blank" rel="noopener noreferrer" class="verify-link">
          <span class="verify-icon">üîç</span>
          Check ROC License
        </a>
        <a href="https://www.bbb.org/us/az/glendale/profile/insulation-contractors/insulation-contractors-of-arizona-1126-1000090032" target="_blank" rel="noopener noreferrer" class="verify-link">
          <span class="verify-icon">‚≠ê</span>
          BBB Accreditation
        </a>
      </div>

      <div class="insurance-contact">
        <p>Need a certificate of insurance? Call <a href="https://sprayfoaminsurance.com/" target="_blank" rel="noopener noreferrer" class="insurance-link">sprayfoaminsurance.com</a> at <a href="tel:844-967-5247" class="phone-link">844-967-5247</a>.</p>
      </div>
    </div>
    {% endif %}
  </div>
</section>

<style>
  /* Licensing & Credentials Section */
  .licensing-credentials {
    padding: 4rem 0;
    position: relative;
    overflow: hidden;
  }

  .licensing-credentials--dark {
    background: var(--gradient-dark);
    color: var(--gray-100);
  }

  .licensing-credentials--light {
    background: var(--gray-100);
    color: var(--primary-dark);
  }

  .licensing-credentials::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at 20% 50%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 50%, rgba(0, 255, 255, 0.05) 0%, transparent 50%);
    pointer-events: none;
  }

  .credentials-header {
    text-align: center;
    margin-bottom: 3rem;
    position: relative;
    z-index: 1;
  }

  .credentials-icon {
    margin-bottom: 2.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Much larger logo size with clean transparency */
  .credentials-logo {
    width: 100%;
    max-width: 400px;  /* Increased from 180px to 400px */
    height: auto;
    filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.6));  /* Enhanced glow */
    transition: all var(--transition-medium);
    /* Ensure clean transparency */
    background: transparent !important;
    mix-blend-mode: normal;
  }

  .credentials-logo:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 0 40px rgba(0, 255, 255, 0.8));
  }

  /* Enhanced title styling for better legibility */
  .credentials-title {
    font-size: 3rem;  /* Increased from 2.5rem */
    font-family: var(--font-heading);
    font-weight: 700;
    margin-bottom: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;  /* Increased letter spacing */
    color: var(--accent-primary);
    text-shadow: 
      0 0 10px rgba(0, 255, 255, 0.8),
      0 0 20px rgba(0, 255, 255, 0.6),
      0 0 30px rgba(0, 255, 255, 0.4);
    position: relative;
    z-index: 2;
  }

  /* Add a subtle background to improve title readability */
  .credentials-title::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -20px;
    right: -20px;
    bottom: -10px;
    background: radial-gradient(ellipse at center, rgba(0, 31, 42, 0.8) 0%, transparent 70%);
    z-index: -1;
    pointer-events: none;
  }

  .credentials-subtitle {
    font-size: 1.125rem;
    max-width: 800px;
    margin: 0 auto;
    line-height: 1.6;
    opacity: 0.9;
  }

  /* Credentials Grid */
  .credentials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
    position: relative;
    z-index: 1;
  }

  .credential-card {
    background: rgba(0, 255, 255, 0.03);
    border: 1px solid rgba(0, 255, 255, 0.2);
    border-radius: 15px;
    padding: 2rem;
    text-align: center;
    position: relative;
    transition: all var(--transition-medium);
    backdrop-filter: blur(10px);
  }

  .credential-card::before {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    right: -1px;
    bottom: -1px;
    background: var(--gradient-accent);
    border-radius: 15px;
    opacity: 0;
    transition: opacity var(--transition-medium);
    z-index: -1;
  }

  .credential-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent-primary);
    box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
  }

  .credential-card:hover::before {
    opacity: 0.1;
  }

  .credential-icon {
    margin-bottom: 1.5rem;
    color: var(--accent-primary);
  }

  .credential-icon svg {
    filter: drop-shadow(0 0 5px currentColor);
  }

  .credential-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .credential-number {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: var(--accent-secondary);
  }

  .credential-description {
    font-size: 1rem;
    line-height: 1.5;
    opacity: 0.9;
  }

  /* Verify Credentials Section */
  .verify-credentials {
    background: rgba(0, 255, 255, 0.03);
    border: 1px solid rgba(0, 255, 255, 0.1);
    border-radius: 20px;
    padding: 2.5rem;
    text-align: center;
    position: relative;
    z-index: 1;
    backdrop-filter: blur(5px);
  }

  .verify-title {
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
    color: var(--accent-primary);
  }

  .verify-subtitle {
    font-size: 1.125rem;
    margin-bottom: 2rem;
    opacity: 0.9;
  }

  .verify-links {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
    margin-bottom: 2rem;
  }

  .verify-link {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 2rem;
    background: var(--gradient-accent);
    color: var(--primary-dark);
    text-decoration: none;
    border-radius: 50px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: all var(--transition-medium);
    box-shadow: 0 4px 15px rgba(0, 255, 255, 0.25);
  }

  .verify-link:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 255, 255, 0.35);
  }

  .verify-icon {
    font-size: 1.25rem;
  }

  .insurance-contact {
    font-size: 1.125rem;
  }

  .insurance-link,
  .phone-link {
    color: var(--accent-primary);
    text-decoration: none;
    font-weight: 600;
    transition: color var(--transition-fast);
  }

  .insurance-link:hover,
  .phone-link:hover {
    color: var(--accent-secondary);
    text-decoration: underline;
  }

  /* Light Theme Adjustments */
  .licensing-credentials--light .credential-card {
    background: rgba(30, 60, 114, 0.05);
    border-color: rgba(30, 60, 114, 0.2);
  }

  .licensing-credentials--light .verify-credentials {
    background: rgba(30, 60, 114, 0.05);
    border-color: rgba(30, 60, 114, 0.1);
  }

  /* Mobile Responsive - Logo fills container width */
  @media (max-width: 768px) {
    .licensing-credentials {
      padding: 3rem 0;
    }

    .credentials-title {
      font-size: 2.2rem;  /* Better size for mobile */
    }

    .credentials-logo {
      width: 90%;  /* Almost full container width on mobile */
      max-width: none;  /* Remove max-width restriction on mobile */
    }

    .credentials-icon {
      margin-bottom: 2rem;
    }

    .credentials-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .verify-links {
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }

    .verify-link {
      width: 100%;
      max-width: 300px;
      justify-content: center;
    }
  }

  /* Tablet size adjustments */
  @media (min-width: 769px) and (max-width: 1024px) {
    .credentials-logo {
      max-width: 350px;  /* Slightly smaller on tablets */
    }
  }

  /* Remove the old glow animation that was causing issues */
  /* New enhanced title animation */
  .licensing-credentials .credentials-title {
    animation: enhanced-title-glow 4s ease-in-out infinite;
  }

  @keyframes enhanced-title-glow {
    0%, 100% {
      text-shadow: 
        0 0 10px rgba(0, 255, 255, 0.8),
        0 0 20px rgba(0, 255, 255, 0.6),
        0 0 30px rgba(0, 255, 255, 0.4);
    }
    50% {
      text-shadow: 
        0 0 15px rgba(0, 255, 255, 0.9),
        0 0 30px rgba(0, 255, 255, 0.7),
        0 0 45px rgba(0, 255, 255, 0.5);
    }
  }
</style>