<!-- Insulation Applications Section Component -->
<!-- Usage: Include in homepage or service pages to showcase primary insulation applications -->
<!-- Variables:
     - sectionTitle: Main section heading (default: "Our Insulation Applications")
     - sectionSubtitle: Section description (default provided)
     - showSection: Boolean to show/hide section (default: true)
-->

{% set defaultTitle = sectionTitle or "Our Insulation Applications" %}
{% set defaultSubtitle = sectionSubtitle or "From residential homes to commercial buildings and agricultural facilities, we provide comprehensive insulation solutions for every application. Choose the right insulation type for your specific needs." %}
{# Fixed: Proper undefined check instead of !== false which was causing section to not render #}
{% set displaySection = showSection if showSection is defined else true %}

{% if displaySection %}
<section class="insulation-applications-section content-section with-grid-particles">
    <div class="container">
        <!-- Section Header -->
        <div class="section-header">
            <h2>{{ defaultTitle }}</h2>
            <p class="section-intro">{{ defaultSubtitle }}</p>
        </div>

        <!-- Applications Grid -->
        <div class="applications-grid">
            <!-- Open Cell Spray Foam -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Open_Cell_Spray_Foam_insulation_Arizona-original.webp" 
                         alt="Open Cell Spray Foam Insulation Installation"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Open Cell Spray Foam</h3>
                <p>This type of spray foam is perfect for homes in Arizona! We love installing open cell spray foam. We have installed open cell for over 20 years! Open cell spray foam is great for Phoenix.</p>
                <ul>
                    <li>Perfect for Arizona homes</li>
                    <li>Excellent thermal performance</li>
                    <li>20+ years experience</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>

            <!-- Closed Cell Spray Foam -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Closed_Cell_Spray_Foam_insulation_Arizona-original.webp"
                         alt="Closed Cell Spray Foam Insulation"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Closed Cell Spray Foam</h3>
                <p>This is a low expanding type of foam. There isn't really anything that compares to its value. In terms of R-value and per inch cost, it's worth every penny. In our humble opinion, this the king of insulation!</p>
                <ul>
                    <li>Superior R-value</li>
                    <li>Moisture barrier</li>
                    <li>Best value per inch</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>

            <!-- Fiberglass Insulation -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Fibreglass_Home_insulation-original.webp"
                         alt="Fiberglass Insulation Installation"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Fiberglass Insulation</h3>
                <p>Fiberglass is quick and easy to install. This has been the "go-to" choice for many homeowners for decades. It is virtually moisture resistant. This is the best option for lower budgets.</p>
                <ul>
                    <li>Quick installation</li>
                    <li>Budget-friendly option</li>
                    <li>Moisture resistant</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>

            <!-- Blown-In/Cellulose Insulation -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Fibereglass_cellulose_Blown_in_Attic_insulation-original.webp"
                         alt="Blown-In Cellulose Insulation"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Blown-In/Cellulose</h3>
                <p>This option is used for attics. It prevents air from leaking. It saves energy. It helps with noise reduction. It does a great job of keeping the heat out and keeping the air condition inside your home.</p>
                <ul>
                    <li>Attic specialist</li>
                    <li>Energy savings</li>
                    <li>Noise reduction</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>

            <!-- Drill & Fill Spray Foam -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Drill_And_Fill_Blown_Dense_packed_wall_insulation-original.webp"
                         alt="Drill and Fill Spray Foam Insulation"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Drill & Fill Spray Foam</h3>
                <p>Drill and fill insulation is very common on existing "tract" homes. Brothers learned to install any insulation on the interior walls of most tract homes. We can drill some holes around your home to add insulation.</p>
                <ul>
                    <li>Existing home solution</li>
                    <li>Minimal disruption</li>
                    <li>Wall insulation upgrade</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>

            <!-- Insulation Removal -->
            <div class="application-card service-card">
                <div class="service-image">
                    <img src="/images/Attic_insulation_removal-original.webp"
                         alt="Professional Insulation Removal Service"
                         width="400"
                         height="267"
                         loading="lazy">
                </div>
                <h3>Insulation Removal</h3>
                <p>If you need insulation removal we can do it. We have industrial vacuums to suck out the insulation and dispose of it. Click here to learn more about our removal services.</p>
                <ul>
                    <li>Professional removal</li>
                    <li>Industrial equipment</li>
                    <li>Safe disposal</li>
                </ul>
                <a href="/contact/" class="btn btn-primary">Learn More</a>
            </div>
        </div>

        <!-- Bottom CTA -->
        <div class="cta-section">
            <h3>Ready to Choose the Right Insulation for Your Project?</h3>
            <p>Contact us today for a free consultation and professional recommendations</p>
            <a href="/contact/" class="btn btn-primary">Get Free Quote <i class="fas fa-phone"></i></a>
        </div>
    </div>
</section>

<style>
/* Insulation Applications Section Styles */
.insulation-applications-section {
    padding: 80px 0;
    position: relative;
    overflow: hidden;
}

/* Add grid and particles background to insulation applications section */
.insulation-applications-section.with-grid-particles {
    position: relative;
    background: linear-gradient(135deg, rgba(20, 20, 20, 0.98) 0%, rgba(30, 30, 30, 0.98) 100%);
    overflow: hidden;
}

/* Grid background */
.insulation-applications-section.with-grid-particles::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
    z-index: 1;
}

/* Animated particles */
.insulation-applications-section.with-grid-particles::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-image: 
        radial-gradient(2px 2px at 20% 30%, rgba(0, 255, 255, 0.3), transparent),
        radial-gradient(2px 2px at 60% 70%, rgba(255, 107, 107, 0.2), transparent),
        radial-gradient(1px 1px at 90% 10%, rgba(0, 255, 255, 0.4), transparent);
    background-size: 200% 200%;
    animation: particleFloat 20s ease-in-out infinite;
    z-index: 1;
}

/* Particle animation */
@keyframes particleFloat {
    0%, 100% {
        background-position: 0% 0%;
    }
    50% {
        background-position: 100% 100%;
    }
}

/* Ensure content is above background effects */
.insulation-applications-section.with-grid-particles .container {
    position: relative;
    z-index: 2;
}

/* Enhance section header for better contrast on dark background */
.insulation-applications-section.with-grid-particles .section-header h2 {
    color: #ffffff;
    text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
}

.insulation-applications-section.with-grid-particles .section-intro {
    color: rgba(255, 255, 255, 0.9);
}

/* Applications Grid */
.applications-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-top: 3rem;
    margin-bottom: 4rem;
}

/* Enhance application cards for better visibility on dark background */
.insulation-applications-section.with-grid-particles .application-card {
    background: rgba(20, 20, 20, 0.9);
    border: 1px solid rgba(0, 255, 255, 0.2);
    backdrop-filter: blur(10px);
}

.insulation-applications-section.with-grid-particles .application-card:hover {
    border-color: rgba(0, 255, 255, 0.5);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 255, 255, 0.2);
}

/* Application Cards - inherit service-card styling */
.application-card {
    transition: all var(--transition-medium);
}

.application-card h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--accent-primary);
}

.application-card p {
    margin-bottom: 1.5rem;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.8);
}

.application-card ul {
    list-style: none;
    padding: 0;
    margin-bottom: 1.5rem;
}

.application-card ul li {
    padding: 0.5rem 0;
    padding-left: 1.5rem;
    position: relative;
    color: rgba(255, 255, 255, 0.8);
}

.application-card ul li::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--accent-primary);
    font-weight: bold;
}

/* CTA Section */
.cta-section {
    text-align: center;
    background: linear-gradient(135deg, rgba(0, 255, 255, 0.05) 0%, rgba(0, 255, 255, 0.02) 100%);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(0, 255, 255, 0.3);
    border-radius: 20px;
    padding: 3rem;
    margin-top: 4rem;
    box-shadow: 
        0 0 20px rgba(0, 0, 0, 0.5),
        inset 0 0 20px rgba(0, 255, 255, 0.05);
}

.cta-section h3 {
    font-size: 2rem;
    margin-bottom: 1rem;
    background: linear-gradient(45deg, var(--accent-primary), var(--accent-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.cta-section p {
    font-size: 1.2rem;
    color: var(--gray-300);
    margin-bottom: 2rem;
}

.cta-section .btn {
    font-size: 1.1rem;
    padding: 1rem 2rem;
}

.cta-section .btn i {
    margin-left: 0.5rem;
}

/* Mobile Responsiveness */
@media (max-width: 1200px) {
    .applications-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .insulation-applications-section {
        padding: 60px 0;
    }
    
    .applications-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        margin-top: 2rem;
        margin-bottom: 3rem;
    }
    
    .cta-section {
        padding: 2rem;
        margin-top: 3rem;
    }
    
    .cta-section h3 {
        font-size: 1.5rem;
    }
    
    .cta-section p {
        font-size: 1rem;
    }
    
    .application-card h3 {
        font-size: 1.3rem;
    }
}

@media (max-width: 480px) {
    .cta-section {
        padding: 1.5rem;
    }
    
    .cta-section h3 {
        font-size: 1.3rem;
    }
}
</style>
{% endif %}